package()
{
  packaging="$1/dune-common/bin/dunepackaging.py"
  if [ ! -f $packaging ]; then
    packaging="dunepackaging.py"
  fi

  # set +e # the next command is allowed to fail
  # check if the commit in dune-common is tagged. If tagged use the tag as
  # version number (assumes the tag is a valid python package version, i.e., v2.8.0rc1
  # otherwise use the default 'dev' numbering.
  # tag=$(git describe --exact-match --tags) # this fails if the current commit has multiple tags 
  # set -e

  # Alternative approach: above fails if the current commit has multiple tags
  tag=$(git tag --contains | sort | tail -1)

  if [ "$tag" = "" ]; then
    echo "Use dev versioning"
    $packaging --onlysdist
  else
    echo "Use version" $tag
    $packaging --onlysdist --version=$tag
  fi
}
